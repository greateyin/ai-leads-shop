# AIsell 專業軟體公司文件集

## 目錄

1. [產品願景與目標](#產品願景與目標)
2. [Scrum 產品待辦與 15 次迭代計畫](#scrum-產品待辦與-15-次迭代計畫)
3. [角色與責任分工](#角色與責任分工)
4. [測試計畫與品質保證](#測試計畫與品質保證)
5. [專案時程與里程碑](#專案時程與里程碑)
6. [風險管理與緩解措施](#風險管理與緩解措施)
7. [變更管理與溝通機制](#變更管理與溝通機制)
8. [部署與版本管理策略](#部署與版本管理策略)
9. [附錄：使用者故事範例與接受標準](#附錄使用者故事範例與接受標準)

## 產品願景與目標

**願景**：打造一個面向微型零售商與創作者的 SaaS 平台，結合生成式 AI、電商、內容行銷與全球支付，讓非技術店主也能快速建立專業網店，並在全球市場競爭。

**目標**：

1. **降低門檻**：讓店家能在 10 分鐘內完成註冊、商品上架與結帳設定。
2. **自動化營運**：透過 AI 生成商品描述、部落格文章與導購回覆，節省人力成本。
3. **可擴充與國際化**：支持多租戶、多貨幣、多語言，並整合本地與國際金流與物流。
4. **資料驅動**：提供即時儀表板與 AI 銷售預測協助店家決策。

## Scrum 產品待辦與 15 次迭代計畫

產品開發採用 Scrum 框架，每次迭代（Sprint）為 1 週。產品待辦（Product Backlog）定義了系統必需的功能與非功能需求，並依照商業價值與技術優先順序進行排程。以下概述主要待辦項目與對應迭代：

| Sprint | 主要交付成果 | 說明 |
|---|---|---|
| **1 啟動迭代** | 整理需求、定義 MVP 範圍、建立專案骨架、CI/CD 與基礎環境配置 | PM/PO 與 SA 確認需求，DB 架構師定義初步 schema，程式設置 Next.js 專案、Auth.js 設定、部署管線。 |
| **2 帳戶與租戶管理** | 使用者註冊/登入、租戶與店家 CRUD、RBAC 權限框架 | 實作 `users`, `tenants`, `shops` 表及 API；簡易 UI。 |
| **3 商品管理與 AI 描述** | 商品 CRUD、分類與標籤、AI 描述生成初版 | 導入 `products` 表及分類表，串接 AI 服務生成描述。 |
| **4 購物車與結帳流程** | 前台購物車、結帳頁、建立訂單與訂單明細 | 搭建 `carts`, `orders`, `order_items` 表及流程。 |
| **5 金流集成 (本地)** | 整合 ECPay、NewebPay API、付款回調與 webhook 驗證 | DB 架構師加入 `payments`, `payment_providers` 表；程式設計共用 PaymentService。 |
| **6 物流與取件** | 接入綠界/藍新物流 API；支援宅配與超商取件 | 建立 `shipping_providers`, `shipping_orders`，前台取件店查詢。 |
| **7 部落格與內容行銷** | MDX 文章 CRUD、SEO/AEO schema 生成、預約發佈 | `blog_posts`, `blog_categories`, `blog_tags` 表及編輯器 UI。 |
| **8 分析儀表板** | 實作基本銷售、訂單與 AI 使用統計；埋點事件 API | 建立 `analytics_events`, `ai_interactions`；整合 Chart.js。 |
| **9 AI 導購與聊天** | AI 聊天元件、向量資料庫連結、RAG 模型調用 | 架設向量資料庫，實作簡易聊天介面與 API。 |
| **10 金流集成 (國際)** | 整合 Stripe、PayPal，支援訂閱與跨境付款 | 補充 `payment_providers` 配置；新增國際金流回調邏輯。 |
| **11 加密支付支援** | 整合 Bitget Wallet、Bybit P2P、useTria 等加密支付 | 規範鏈抽象接口與託管機制；確認法規限制。 |
| **12 進階報表與預測** | AI 銷售預測、A/B 測試功能、feature flags 管理 | 採用 ML 模型預測熱銷商品；新增 `feature_flags` 表及管理 UI。 |
| **13 性能與安全加固** | 加入 RLS、快取策略、負載測試與安全審查 | 強化多租戶隔離；完善安全指南。 |
| **14 國際化與本地化** | 多語言界面、時區與日期格式、匯率顯示 | 利用 i18n，改進 UI 支持繁中、英語等。 |
| **15 打包與發佈** | 修正缺陷、更新文件、準備上線與客戶培訓 | 完成最終測試、更新說明與操作手冊。 |

每個 Sprint 開始前由 PO 梳理 Product Backlog，SA 與 Programmer 評估複雜度；Sprint 結束時召開 Review 會議，Programmer 回報實作問題，DB 架構師調整資料庫，SA 統整問題與 PM/PO 協調下一步。這樣的 15 次迭代確保需求與技術逐步完善。

## 角色與責任分工

| 角色 | 責任 |
|---|---|
| **產品負責人（PO）** | 定義產品願景、維護產品待辦、優先順序；與客戶溝通並確保團隊交付的價值符合市場需求。 |
| **專案經理（PM）** | 制定專案時程與資源分配，監控進度與風險，協調跨部門溝通，維護進度報表。 |
| **系統分析師（SA）** | 撰寫系統規格書、定義資料流程與 API，審查開發輸出，識別需求缺口並與 PM/PO 溝通。 |
| **資料庫架構師** | 設計與維護資料庫 schema，優化索引與查詢效能，確保資料完整性與安全。 |
| **程式設計師（Programmer）** | 根據規格書實作前端與後端功能，撰寫單元測試並提交 Pull Requests；在 Scrum 中回報技術問題與改進建議。 |
| **測試工程師（QA）** | 撰寫測試計畫與案例，執行手動與自動化測試，回報缺陷並追蹤修復。 |
| **DevOps/維運** | 建構 CI/CD 流程，維護部署腳本與監控系統，確保服務可用性與效率。 |

## 測試計畫與品質保證

質量管理遵循「測試左移」的理念，從需求階段便開始考慮可測性。測試計畫包含：

1. **單元測試**：程式設計師需為 API 方法、React 元件撰寫單元測試，涵蓋一般路徑與錯誤處理。使用 Jest、Testing Library、Vitest 等工具。
2. **整合測試**：測試服務之間的互動，例如創建訂單後呼叫金流服務，驗證資料庫更新與 webhook 邏輯正確。使用 supertest、Playwright 等。
3. **端到端 (E2E) 測試**：以使用者角度驗證整個流程（註冊→上架→購物車→付款→物流），確保 UI 與後端整合良好。可採 Cypress 或 Playwright 進行。
4. **安全性測試**：進行滲透測試、CSRF/XSS 檢查、SQL 注入掃描；驗證 Webhook 簽章與敏感資料加密。
5. **性能測試**：壓力測試與負載測試，確定 API 與資料庫在高流量下的響應；測試快取策略與多租戶分區。
6. **驗收測試**：根據使用者故事的接受標準，由 PO/客戶參與驗收確認功能符合期待。驗收測試文檔在附錄列出範例。

測試過程中需記錄缺陷與修復狀態，採用缺陷追蹤工具（如 Jira）。發現的缺陷會納入下個 Sprint 待辦。

## 專案時程與里程碑

以下為 15 週 Sprint 的概略時程；可根據實際人力與優先順序調整：

| 里程碑 | 週次 | 描述 |
|---|---|---|
| **啟動與計畫** | 第 1 週 | 明確需求、設置環境、建立基礎架構。 |
| **MVP 交付** | 第 5 週 | 完成登入、租戶、商品、訂單、金流 (ECPay/NewebPay)，能進行基本交易。 |
| **MVP+ 功能** | 第 8 週 | 加入物流、部落格、AI 描述與儀表板。 |
| **國際化與加密支付** | 第 11 週 | 整合 Stripe/PayPal、Bitget/Bybit/useTria 等。 |
| **性能安全優化** | 第 13 週 | 強化 RLS、快取與安全測試。 |
| **完整上線準備** | 第 15 週 | 完成所有功能修正、文件更新、客戶培訓與上線計畫。 |

每個里程碑結束後需進行審查會議，確認目標是否達成並調整後續計畫。

## 風險管理與緩解措施

| 風險類型 | 可能發生情況 | 緩解策略 |
|---|---|---|
| **需求變動** | PO 或客戶在中途調整功能範圍，導致開發延遲。 | 迭代初期透過快速原型確認需求；建立變更流程，需求變動需經 SA/PM 評估影響並排入待辦。 |
| **技術挑戰** | 新技術 (AI 、鏈抽象、全球金流) 整合難度高。 | 提前進行 Spike 研究，建立 Proof of Concept；與供應商密切合作獲取支援。 |
| **資源不足** | 團隊人手有限或離職，影響進度。 | 建立知識共享與文件化，確保新人可快速上手；定期檢視資源配置並向管理層請求支援。 |
| **法規合規** | 跨境支付涉及不同法規 (GDPR、KYC、稅務)。 | 聘請法律顧問檢查合規，採用地區性合規插件（如 Stripe Tax），保持資料最小化。 |
| **安全事件** | 金流或資料庫遭受攻擊，造成客戶損失。 | 建立多層防護機制，定期進行安全掃描；準備事件響應計畫並購買網安保險。 |

## 變更管理與溝通機制

* **變更提案**：所有規格變更需通過 Jira 或專案管理工具提交，SA 評估影響後在 Sprint Planning 討論。
* **會議節奏**：每日 Standup、每 Sprint Planning/Review/Retro；SA 每週向 PM/PO 彙報需求問題與技術風險。
* **文件維護**：系統規格書、API 文件、資料庫 Schema 需版本控制。變更後即更新文件並通知相關角色。
* **溝通工具**：使用 Slack/Teams 作即時溝通，重要決策於 Confluence 或 Notion 記錄並存檔。

## 部署與版本管理策略

1. **版本控制**：所有程式碼、基礎設施腳本與文件均存於 Git；採用 trunk-based development，每個功能由 feature 分支實作並經 Code Review 合併。
2. **CI/CD**：GitHub Actions 在 Pull Request 時執行 Lint、型別檢查、單元測試；合併至 main 分支後自動部署至 staging 環境，並觸發 E2E 測試。發版需標記語義化版本號 (SemVer) 並生成 Changelog。
3. **環境區分**：Local 開發、Staging、Production；Staging 模擬真實環境測試金流與物流回呼。金流密鑰與資料庫連線資訊透過環境變數與秘密管理服務。 
4. **監控與回滾**：利用 APM/監控工具監測錯誤與延遲，部署失敗時可快速回滾至前一版本；使用 Canary 或 Blue‑Green Deploy 以降低風險。

## 附錄：使用者故事範例與接受標準

以下為部分使用者故事及其接受標準，供開發與測試參考：

### 使用者故事 US01：店家註冊

* 作為尚未有商店的新用戶，我希望能輸入店名、電子郵件與密碼完成註冊，讓我快速建立自己的線上商店。
* **接受標準**：
  1. 使用者於註冊頁輸入必填欄位按下「註冊」後，系統建立 `users`、`tenants` 與 `shops` 記錄。
  2. 系統寄送驗證信並顯示「註冊成功」提示；驗證鏈結有效期 24 小時。
  3. 未完成驗證時不可登入；完成驗證後導向商店後台。

### 使用者故事 US02：商品上架與 AI 描述

* 作為店家，我希望在新增商品時自動生成商品描述與 FAQ，讓我節省撰寫文案的時間。
* **接受標準**：
  1. 店家在「新增商品」頁輸入商品名稱與關鍵字，點擊「AI 生成描述」。
  2. 系統呼叫 AI 服務返回 Markdown 描述與 FAQ，並顯示於編輯欄可供修改。
  3. 店家儲存商品後，描述寫入 `products` 表，AI 互動紀錄寫入 `ai_interactions`。

### 使用者故事 US03：顧客下單與付款

* 作為顧客，我希望能將商品加入購物車並使用偏好的付款方式完成結帳，以便快速購買商品。
* **接受標準**：
  1. 顧客可於商品頁加入購物車，進入結帳頁輸入收件人資訊並選擇配送與付款方式。
  2. 系統計算運費與折扣，顯示訂單總價；顧客點擊「確認下單」後生成訂單號並導向選擇的金流頁面。
  3. 金流供應商處理付款後回調系統，系統更新 `orders.payment_status` 為 `paid` 並寄送通知。

更多使用者故事可根據待辦項目延伸，例如管理員邀請員工、部落格文章 SEO 調整、AI 導購聊天等。每則故事須附帶明確的接受標準，供開發與驗收參考。